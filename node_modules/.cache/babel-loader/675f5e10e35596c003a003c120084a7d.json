{"ast":null,"code":"var _jsxFileName = \"/home/mitron/Desktop/MYMEDIRECORDS/frontend/src/Components/DashbordCompo/UploadRecord.js\";\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport swal from 'sweetalert';\nimport { Button, TextField, Dialog, DialogActions, DialogTitle, DialogContent, Table, TableBody, TableCell, TableContainer, TableHead, TableRow, LinearProgress } from '@material-ui/core';\nimport Pagination from '@material-ui/lab/Pagination';\n\nconst UploadRecord = () => {\n  const [file, setFile] = useState(null);\n  const [description, setDescription] = useState('');\n  const [uploading, setUploading] = useState(false);\n  const [records, setRecords] = useState([]);\n  const [page, setPage] = useState(1);\n  const [pages, setPages] = useState(0);\n  const [loading, setLoading] = useState(false);\n  const [search, setSearch] = useState('');\n  const [openEditModal, setOpenEditModal] = useState(false);\n  const [currentRecord, setCurrentRecord] = useState(null);\n  useEffect(() => {\n    getRecords();\n  }, [page, search]);\n\n  const getRecords = () => {\n    setLoading(true);\n    let data = `?page=${page}`;\n\n    if (search) {\n      data += `&search=${search}`;\n    }\n\n    axios.get(`http://localhost:2000/get-records${data}`).then(res => {\n      setLoading(false);\n      setRecords(res.data.records);\n      setPages(res.data.pages);\n    }).catch(err => {\n      setLoading(false);\n      swal({\n        text: err.response.data.errorMessage,\n        icon: 'error'\n      });\n    });\n  };\n\n  const handleFileChange = e => {\n    setFile(e.target.files[0]);\n  };\n\n  const handleDescriptionChange = e => {\n    setDescription(e.target.value);\n  };\n\n  const handleUpload = () => {\n    if (!file || !description) {\n      swal({\n        text: 'Please provide a file and description.',\n        icon: 'warning'\n      });\n      return;\n    }\n\n    const formData = new FormData();\n    formData.append('file', file);\n    formData.append('description', description);\n    setUploading(true);\n    axios.post('http://localhost:2000/upload-record', formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    }).then(response => {\n      setUploading(false);\n      swal({\n        text: 'File uploaded successfully!',\n        icon: 'success'\n      });\n      setFile(null);\n      setDescription('');\n      getRecords();\n    }).catch(error => {\n      var _error$response, _error$response$data;\n\n      setUploading(false);\n      swal({\n        text: ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.errorMessage) || 'An error occurred',\n        icon: 'error'\n      });\n    });\n  };\n\n  const handleEditOpen = record => {\n    setCurrentRecord(record);\n    setDescription(record.description);\n    setOpenEditModal(true);\n  };\n\n  const handleEditClose = () => {\n    setOpenEditModal(false);\n    setCurrentRecord(null);\n    setDescription('');\n  };\n\n  const handleUpdate = () => {\n    const formData = new FormData();\n    formData.append('id', currentRecord._id);\n    if (file) formData.append('file', file);\n    formData.append('description', description);\n    axios.post('http://localhost:2000/update-record', formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    }).then(res => {\n      swal({\n        text: 'Record updated successfully!',\n        icon: 'success'\n      });\n      handleEditClose();\n      getRecords();\n    }).catch(err => {\n      swal({\n        text: err.response.data.errorMessage,\n        icon: 'error'\n      });\n      handleEditClose();\n    });\n  };\n\n  const handleDelete = id => {\n    axios.post('http://localhost:2000/delete-record', {\n      id\n    }, {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(res => {\n      swal({\n        text: 'Record deleted successfully!',\n        icon: 'success'\n      });\n      getRecords();\n    }).catch(err => {\n      swal({\n        text: err.response.data.errorMessage,\n        icon: 'error'\n      });\n    });\n  };\n\n  const handlePageChange = (event, value) => {\n    setPage(value);\n  };\n\n  const handleSearchChange = e => {\n    setSearch(e.target.value);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 5\n    }\n  }, loading && /*#__PURE__*/React.createElement(LinearProgress, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 7\n    }\n  }, \"Upload Record\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    onChange: handleFileChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"Description\",\n    value: description,\n    onChange: handleDescriptionChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleUpload,\n    disabled: uploading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 9\n    }\n  }, uploading ? 'Uploading...' : 'Upload')), /*#__PURE__*/React.createElement(Dialog, {\n    open: openEditModal,\n    onClose: handleEditClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(DialogTitle, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 9\n    }\n  }, \"Edit Record\"), /*#__PURE__*/React.createElement(DialogContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    type: \"text\",\n    autoComplete: \"off\",\n    value: description,\n    onChange: handleDescriptionChange,\n    placeholder: \"Description\",\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    variant: \"contained\",\n    component: \"label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 11\n    }\n  }, \"Upload\", /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    accept: \"image/*\",\n    onChange: handleFileChange,\n    hidden: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 13\n    }\n  })), \"\\xA0\", file && file.name), /*#__PURE__*/React.createElement(DialogActions, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: handleEditClose,\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 11\n    }\n  }, \"Cancel\"), /*#__PURE__*/React.createElement(Button, {\n    onClick: handleUpdate,\n    color: \"primary\",\n    autoFocus: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 11\n    }\n  }, \"Update\"))), /*#__PURE__*/React.createElement(TextField, {\n    type: \"search\",\n    autoComplete: \"off\",\n    placeholder: \"Search by description\",\n    value: search,\n    onChange: handleSearchChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(TableContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Table, {\n    \"aria-label\": \"simple table\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TableHead, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(TableRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(TableCell, {\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 15\n    }\n  }, \"Description\"), /*#__PURE__*/React.createElement(TableCell, {\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 15\n    }\n  }, \"File\"), /*#__PURE__*/React.createElement(TableCell, {\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 15\n    }\n  }, \"Actions\"))), /*#__PURE__*/React.createElement(TableBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 11\n    }\n  }, records.map(record => /*#__PURE__*/React.createElement(TableRow, {\n    key: record._id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(TableCell, {\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 17\n    }\n  }, record.description), /*#__PURE__*/React.createElement(TableCell, {\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: `http://localhost:2000/${record.file}`,\n    target: \"_blank\",\n    rel: \"noopener noreferrer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 19\n    }\n  }, \"View File\")), /*#__PURE__*/React.createElement(TableCell, {\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"outlined\",\n    color: \"primary\",\n    size: \"small\",\n    onClick: () => handleEditOpen(record),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 19\n    }\n  }, \"Edit\"), /*#__PURE__*/React.createElement(Button, {\n    variant: \"outlined\",\n    color: \"secondary\",\n    size: \"small\",\n    onClick: () => handleDelete(record._id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 19\n    }\n  }, \"Delete\")))))), /*#__PURE__*/React.createElement(Pagination, {\n    count: pages,\n    page: page,\n    onChange: handlePageChange,\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 9\n    }\n  })));\n};\n\nexport default UploadRecord;","map":{"version":3,"sources":["/home/mitron/Desktop/MYMEDIRECORDS/frontend/src/Components/DashbordCompo/UploadRecord.js"],"names":["React","useState","useEffect","axios","swal","Button","TextField","Dialog","DialogActions","DialogTitle","DialogContent","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","LinearProgress","Pagination","UploadRecord","file","setFile","description","setDescription","uploading","setUploading","records","setRecords","page","setPage","pages","setPages","loading","setLoading","search","setSearch","openEditModal","setOpenEditModal","currentRecord","setCurrentRecord","getRecords","data","get","then","res","catch","err","text","response","errorMessage","icon","handleFileChange","e","target","files","handleDescriptionChange","value","handleUpload","formData","FormData","append","post","headers","error","handleEditOpen","record","handleEditClose","handleUpdate","_id","handleDelete","id","handlePageChange","event","handleSearchChange","name","map"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport swal from 'sweetalert';\nimport { Button, TextField, Dialog, DialogActions, DialogTitle, DialogContent, Table, TableBody, TableCell, TableContainer, TableHead, TableRow, LinearProgress } from '@material-ui/core';\nimport Pagination from '@material-ui/lab/Pagination';\n\nconst UploadRecord = () => {\n  const [file, setFile] = useState(null);\n  const [description, setDescription] = useState('');\n  const [uploading, setUploading] = useState(false);\n  const [records, setRecords] = useState([]);\n  const [page, setPage] = useState(1);\n  const [pages, setPages] = useState(0);\n  const [loading, setLoading] = useState(false);\n  const [search, setSearch] = useState('');\n  const [openEditModal, setOpenEditModal] = useState(false);\n  const [currentRecord, setCurrentRecord] = useState(null);\n\n  useEffect(() => {\n    getRecords();\n  }, [page, search]);\n\n  const getRecords = () => {\n    setLoading(true);\n    let data = `?page=${page}`;\n    if (search) {\n      data += `&search=${search}`;\n    }\n    axios.get(`http://localhost:2000/get-records${data}`)\n      .then(res => {\n        setLoading(false);\n        setRecords(res.data.records);\n        setPages(res.data.pages);\n      })\n      .catch(err => {\n        setLoading(false);\n        swal({\n          text: err.response.data.errorMessage,\n          icon: 'error',\n        });\n      });\n  };\n\n  const handleFileChange = (e) => {\n    setFile(e.target.files[0]);\n  };\n\n  const handleDescriptionChange = (e) => {\n    setDescription(e.target.value);\n  };\n\n  const handleUpload = () => {\n    if (!file || !description) {\n      swal({\n        text: 'Please provide a file and description.',\n        icon: 'warning',\n      });\n      return;\n    }\n\n    const formData = new FormData();\n    formData.append('file', file);\n    formData.append('description', description);\n\n    setUploading(true);\n\n    axios.post('http://localhost:2000/upload-record', formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data',\n      },\n    })\n      .then((response) => {\n        setUploading(false);\n        swal({\n          text: 'File uploaded successfully!',\n          icon: 'success',\n        });\n        setFile(null);\n        setDescription('');\n        getRecords();\n      })\n      .catch((error) => {\n        setUploading(false);\n        swal({\n          text: error.response?.data?.errorMessage || 'An error occurred',\n          icon: 'error',\n        });\n      });\n  };\n\n  const handleEditOpen = (record) => {\n    setCurrentRecord(record);\n    setDescription(record.description);\n    setOpenEditModal(true);\n  };\n\n  const handleEditClose = () => {\n    setOpenEditModal(false);\n    setCurrentRecord(null);\n    setDescription('');\n  };\n\n  const handleUpdate = () => {\n    const formData = new FormData();\n    formData.append('id', currentRecord._id);\n    if (file) formData.append('file', file);\n    formData.append('description', description);\n\n    axios.post('http://localhost:2000/update-record', formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data',\n      },\n    })\n      .then((res) => {\n        swal({\n          text: 'Record updated successfully!',\n          icon: 'success',\n        });\n        handleEditClose();\n        getRecords();\n      })\n      .catch((err) => {\n        swal({\n          text: err.response.data.errorMessage,\n          icon: 'error',\n        });\n        handleEditClose();\n      });\n  };\n\n  const handleDelete = (id) => {\n    axios.post('http://localhost:2000/delete-record', { id }, {\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    })\n      .then((res) => {\n        swal({\n          text: 'Record deleted successfully!',\n          icon: 'success',\n        });\n        getRecords();\n      })\n      .catch((err) => {\n        swal({\n          text: err.response.data.errorMessage,\n          icon: 'error',\n        });\n      });\n  };\n\n  const handlePageChange = (event, value) => {\n    setPage(value);\n  };\n\n  const handleSearchChange = (e) => {\n    setSearch(e.target.value);\n  };\n\n  return (\n    <div>\n      {loading && <LinearProgress />}\n      <h1>Upload Record</h1>\n      <div>\n        <input type=\"file\" onChange={handleFileChange} />\n        <input\n          type=\"text\"\n          placeholder=\"Description\"\n          value={description}\n          onChange={handleDescriptionChange}\n        />\n        <button onClick={handleUpload} disabled={uploading}>\n          {uploading ? 'Uploading...' : 'Upload'}\n        </button>\n      </div>\n\n      <Dialog\n        open={openEditModal}\n        onClose={handleEditClose}\n      >\n        <DialogTitle>Edit Record</DialogTitle>\n        <DialogContent>\n          <TextField\n            type=\"text\"\n            autoComplete=\"off\"\n            value={description}\n            onChange={handleDescriptionChange}\n            placeholder=\"Description\"\n            required\n          /><br />\n          <Button variant=\"contained\" component=\"label\">\n            Upload\n            <input\n              type=\"file\"\n              accept=\"image/*\"\n              onChange={handleFileChange}\n              hidden\n            />\n          </Button>&nbsp;\n          {file && file.name}\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleEditClose} color=\"primary\">\n            Cancel\n          </Button>\n          <Button onClick={handleUpdate} color=\"primary\" autoFocus>\n            Update\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n      <TextField\n        type=\"search\"\n        autoComplete=\"off\"\n        placeholder=\"Search by description\"\n        value={search}\n        onChange={handleSearchChange}\n      />\n\n      <TableContainer>\n        <Table aria-label=\"simple table\">\n          <TableHead>\n            <TableRow>\n              <TableCell align=\"center\">Description</TableCell>\n              <TableCell align=\"center\">File</TableCell>\n              <TableCell align=\"center\">Actions</TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {records.map((record) => (\n              <TableRow key={record._id}>\n                <TableCell align=\"center\">{record.description}</TableCell>\n                <TableCell align=\"center\">\n                  <a href={`http://localhost:2000/${record.file}`} target=\"_blank\" rel=\"noopener noreferrer\">View File</a>\n                </TableCell>\n                <TableCell align=\"center\">\n                  <Button\n                    variant=\"outlined\"\n                    color=\"primary\"\n                    size=\"small\"\n                    onClick={() => handleEditOpen(record)}\n                  >\n                    Edit\n                  </Button>\n                  <Button\n                    variant=\"outlined\"\n                    color=\"secondary\"\n                    size=\"small\"\n                    onClick={() => handleDelete(record._id)}\n                  >\n                    Delete\n                  </Button>\n                </TableCell>\n              </TableRow>\n            ))}\n          </TableBody>\n        </Table>\n        <Pagination count={pages} page={page} onChange={handlePageChange} color=\"primary\" />\n      </TableContainer>\n    </div>\n  );\n};\n\nexport default UploadRecord;\n"]},"metadata":{},"sourceType":"module"}