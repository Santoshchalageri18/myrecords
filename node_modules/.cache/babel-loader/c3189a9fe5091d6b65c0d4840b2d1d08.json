{"ast":null,"code":"import _regeneratorRuntime from\"/home/mitron/Desktop/MYMEDIRECORDS/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/mitron/Desktop/MYMEDIRECORDS/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/mitron/Desktop/MYMEDIRECORDS/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/mitron/Desktop/MYMEDIRECORDS/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/mitron/Desktop/MYMEDIRECORDS/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/mitron/Desktop/MYMEDIRECORDS/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import axios from'axios';import swal from'sweetalert';import{withRouter}from'../../utils';// Assuming withRouter is a higher-order component to handle routing\nvar MyRecords=/*#__PURE__*/function(_Component){_inherits(MyRecords,_Component);var _super=_createSuper(MyRecords);function MyRecords(props){var _this;_classCallCheck(this,MyRecords);_this=_super.call(this,props);_this.fetchRecords=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var token,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;token=localStorage.getItem('token');if(token){_context.next=6;break;}swal({text:'You are not logged in. Please log in first.',icon:'warning'});_this.props.history.push('/login');// Redirect to login page\nreturn _context.abrupt(\"return\");case 6:_context.next=8;return axios.get('http://localhost:2000/get-records',{headers:{Authorization:\"Bearer \".concat(token)}});case 8:response=_context.sent;_this.setState({records:response.data.records,loading:false});_context.next=17;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](0);console.error('Error fetching records:',_context.t0);swal({text:'Error fetching records. Please try again later.',icon:'error'});_this.setState({loading:false});case 17:case\"end\":return _context.stop();}}},_callee,null,[[0,12]]);}));_this.state={records:[],loading:true};return _this;}_createClass(MyRecords,[{key:\"componentDidMount\",value:function componentDidMount(){this.fetchRecords();}},{key:\"render\",value:function render(){var _this$state=this.state,records=_this$state.records,loading=_this$state.loading;return/*#__PURE__*/React.createElement(\"div\",{style:{padding:'20px'}},/*#__PURE__*/React.createElement(\"h1\",null,\"My Records\"),loading?/*#__PURE__*/React.createElement(\"p\",null,\"Loading...\"):/*#__PURE__*/React.createElement(\"div\",null,records.length>0?/*#__PURE__*/React.createElement(\"ul\",null,records.map(function(record,index){return/*#__PURE__*/React.createElement(\"li\",{key:index},record.filename);})):/*#__PURE__*/React.createElement(\"p\",null,\"No records found.\")));}}]);return MyRecords;}(Component);export default withRouter(MyRecords);","map":{"version":3,"sources":["/home/mitron/Desktop/MYMEDIRECORDS/frontend/src/Components/DashbordCompo/MyRecords.js"],"names":["React","Component","axios","swal","withRouter","MyRecords","props","fetchRecords","token","localStorage","getItem","text","icon","history","push","get","headers","Authorization","response","setState","records","data","loading","console","error","state","padding","length","map","record","index","filename"],"mappings":"y7BAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,IAAP,KAAiB,YAAjB,CACA,OAASC,UAAT,KAA2B,aAA3B,CAA0C;GAEpCC,CAAAA,S,sGACJ,mBAAYC,KAAZ,CAAmB,2CACjB,uBAAMA,KAAN,EADiB,MAYnBC,YAZmB,sEAYJ,sKAELC,KAFK,CAEGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAFH,IAGNF,KAHM,yBAITL,IAAI,CAAC,CACHQ,IAAI,CAAE,6CADH,CAEHC,IAAI,CAAE,SAFH,CAAD,CAAJ,CAIA,MAAKN,KAAL,CAAWO,OAAX,CAAmBC,IAAnB,CAAwB,QAAxB,EAAmC;AAR1B,8DAYYZ,CAAAA,KAAK,CAACa,GAAN,CAAU,mCAAV,CAA+C,CACpEC,OAAO,CAAE,CACPC,aAAa,kBAAYT,KAAZ,CADN,CAD2D,CAA/C,CAZZ,QAYLU,QAZK,eAkBX,MAAKC,QAAL,CAAc,CACZC,OAAO,CAAEF,QAAQ,CAACG,IAAT,CAAcD,OADX,CAEZE,OAAO,CAAE,KAFG,CAAd,EAlBW,iFAuBXC,OAAO,CAACC,KAAR,CAAc,yBAAd,cACArB,IAAI,CAAC,CACHQ,IAAI,CAAE,iDADH,CAEHC,IAAI,CAAE,OAFH,CAAD,CAAJ,CAIA,MAAKO,QAAL,CAAc,CAAEG,OAAO,CAAE,KAAX,CAAd,EA5BW,qEAZI,GAEjB,MAAKG,KAAL,CAAa,CACXL,OAAO,CAAE,EADE,CAEXE,OAAO,CAAE,IAFE,CAAb,CAFiB,aAMlB,C,mFAEmB,CAClB,KAAKf,YAAL,GACD,C,uCAkCQ,iBACsB,KAAKkB,KAD3B,CACCL,OADD,aACCA,OADD,CACUE,OADV,aACUA,OADV,CAGP,mBACE,2BAAK,KAAK,CAAE,CAAEI,OAAO,CAAE,MAAX,CAAZ,eACE,2CADF,CAEGJ,OAAO,cACN,0CADM,cAGN,+BACGF,OAAO,CAACO,MAAR,CAAiB,CAAjB,cACC,8BACGP,OAAO,CAACQ,GAAR,CAAY,SAACC,MAAD,CAASC,KAAT,qBACX,0BAAI,GAAG,CAAEA,KAAT,EAAiBD,MAAM,CAACE,QAAxB,CADW,EAAZ,CADH,CADD,cAOC,iDARJ,CALJ,CADF,CAoBD,C,uBApEqB9B,S,EAuExB,cAAeG,CAAAA,UAAU,CAACC,SAAD,CAAzB","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport swal from 'sweetalert';\nimport { withRouter } from '../../utils'; // Assuming withRouter is a higher-order component to handle routing\n\nclass MyRecords extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      records: [],\n      loading: true,\n    };\n  }\n\n  componentDidMount() {\n    this.fetchRecords();\n  }\n\n  fetchRecords = async () => {\n    try {\n      const token = localStorage.getItem('token');\n      if (!token) {\n        swal({\n          text: 'You are not logged in. Please log in first.',\n          icon: 'warning',\n        });\n        this.props.history.push('/login'); // Redirect to login page\n        return;\n      }\n\n      const response = await axios.get('http://localhost:2000/get-records', {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      });\n\n      this.setState({\n        records: response.data.records,\n        loading: false,\n      });\n    } catch (error) {\n      console.error('Error fetching records:', error);\n      swal({\n        text: 'Error fetching records. Please try again later.',\n        icon: 'error',\n      });\n      this.setState({ loading: false });\n    }\n  };\n\n  render() {\n    const { records, loading } = this.state;\n\n    return (\n      <div style={{ padding: '20px' }}>\n        <h1>My Records</h1>\n        {loading ? (\n          <p>Loading...</p>\n        ) : (\n          <div>\n            {records.length > 0 ? (\n              <ul>\n                {records.map((record, index) => (\n                  <li key={index}>{record.filename}</li>\n                ))}\n              </ul>\n            ) : (\n              <p>No records found.</p>\n            )}\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default withRouter(MyRecords);\n"]},"metadata":{},"sourceType":"module"}