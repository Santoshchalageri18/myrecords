{"ast":null,"code":"import _defineProperty from\"/home/mitron/Desktop/MYMEDIRECORDS/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/home/mitron/Desktop/MYMEDIRECORDS/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/mitron/Desktop/MYMEDIRECORDS/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/mitron/Desktop/MYMEDIRECORDS/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/mitron/Desktop/MYMEDIRECORDS/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import swal from\"sweetalert\";import{Button,TextField,Link}from\"@material-ui/core\";import{withRouter}from\"../utils\";import Header from\"../Header\";var axios=require(\"axios\");var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);function Login(props){var _this;_classCallCheck(this,Login);_this=_super.call(this,props);_this.loadGoogleScript=function(){var script=document.createElement('script');script.src='https://accounts.google.com/gsi/client';script.async=true;script.defer=true;script.onload=_this.onGoogleScriptLoad;document.body.appendChild(script);};_this.onGoogleScriptLoad=function(){_this.setState({isGoogleScriptLoaded:true});_this.initializeGoogleSignIn();};_this.initializeGoogleSignIn=function(){if(window.google){window.google.accounts.id.initialize({client_id:'480201724067-6k5cjhkqeg9gpk3aeomrq5vborb8kjqv.apps.googleusercontent.com',callback:_this.handleCredentialResponse});window.google.accounts.id.renderButton(document.getElementById(\"google-signin-button\"),{theme:\"outline\",size:\"large\"}// Customization attributes\n);}};_this.handleCredentialResponse=function(response){axios.post('http://localhost:2000/google-login',{id_token:response.credential}).then(function(res){// Handle successful login\nlocalStorage.setItem('token',res.data.token);localStorage.setItem('user_id',res.data.id);localStorage.setItem('loggedIn','true');// Set flag indicating user is logged in\n_this.props.navigate(\"/HomeDashboard\");}).catch(function(err){console.error('Google Sign-In failed:',err);swal({text:'Google Sign-In failed. Please try again.',icon:\"error\"});});};_this.onChange=function(e){return _this.setState(_defineProperty({},e.target.name,e.target.value));};_this.login=function(){var _this$state=_this.state,username=_this$state.username,password=_this$state.password;axios.post('http://localhost:2000/login',{username:username,password:password}).then(function(res){localStorage.setItem('token',res.data.token);localStorage.setItem('user_id',res.data.id);localStorage.setItem('loggedIn','true');_this.props.navigate(\"/HomeDashboard\");}).catch(function(err){if(err.response&&err.response.data&&err.response.data.errorMessage){swal({text:err.response.data.errorMessage,icon:\"error\"});}});};_this.state={username:'',password:'',isGoogleScriptLoaded:false};return _this;}_createClass(Login,[{key:\"componentDidMount\",value:function componentDidMount(){// Load the Google Identity Services library\nthis.loadGoogleScript();}},{key:\"render\",value:function render(){var _this2=this;var backgroundStyle={backgroundImage:'url(\"https://i.postimg.cc/KYXFX1pB/Pngtree-background-biru-keren-dan-kosong-1738466.png\")',backgroundSize:'cover',backgroundPosition:'center',backgroundRepeat:'no-repeat',height:'100vh',display:'flex',justifyContent:'center',alignItems:'center'};var formStyle={background:'rgba(255, 255, 255, 0.8)',padding:'20px',borderRadius:'10px',boxShadow:'0px 4px 10px rgba(0, 0, 0, 0.1)',width:'100%',maxWidth:'400px',textAlign:'center'};return/*#__PURE__*/React.createElement(\"div\",{style:backgroundStyle},/*#__PURE__*/React.createElement(\"div\",{style:formStyle},/*#__PURE__*/React.createElement(\"h2\",null,\"Login\"),/*#__PURE__*/React.createElement(TextField,{id:\"standard-basic\",type:\"text\",autoComplete:\"off\",name:\"username\",value:this.state.username,onChange:this.onChange,placeholder:\"User Name\",required:true,fullWidth:true}),/*#__PURE__*/React.createElement(TextField,{id:\"standard-basic\",type:\"password\",autoComplete:\"off\",name:\"password\",value:this.state.password,onChange:this.onChange,placeholder:\"Password\",required:true,fullWidth:true}),/*#__PURE__*/React.createElement(Button,{className:\"button-style\",variant:\"contained\",color:\"primary\",size:\"large\",disabled:this.state.username===''||this.state.password==='',onClick:this.login,fullWidth:true,style:{marginTop:'20px'}},\"Login\"),/*#__PURE__*/React.createElement(\"div\",{className:\"google-signin\",style:{margin:'20px 0'}},/*#__PURE__*/React.createElement(\"div\",{id:\"google-signin-button\"})),/*#__PURE__*/React.createElement(Link,{className:\"register-link\",component:\"button\",onClick:function onClick(){_this2.props.navigate(\"/register\");},style:{marginTop:'10px',color:'#3f51b5',fontWeight:'bold'}},\"Register\")),/*#__PURE__*/React.createElement(Header,null));}}]);return Login;}(Component);export default withRouter(Login);","map":{"version":3,"sources":["/home/mitron/Desktop/MYMEDIRECORDS/frontend/src/Pages/Login.js"],"names":["React","Component","swal","Button","TextField","Link","withRouter","Header","axios","require","Login","props","loadGoogleScript","script","document","createElement","src","async","defer","onload","onGoogleScriptLoad","body","appendChild","setState","isGoogleScriptLoaded","initializeGoogleSignIn","window","google","accounts","id","initialize","client_id","callback","handleCredentialResponse","renderButton","getElementById","theme","size","response","post","id_token","credential","then","res","localStorage","setItem","data","token","navigate","catch","err","console","error","text","icon","onChange","e","target","name","value","login","state","username","password","errorMessage","backgroundStyle","backgroundImage","backgroundSize","backgroundPosition","backgroundRepeat","height","display","justifyContent","alignItems","formStyle","background","padding","borderRadius","boxShadow","width","maxWidth","textAlign","marginTop","margin","color","fontWeight"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport swal from \"sweetalert\";\nimport { Button, TextField, Link } from \"@material-ui/core\";\nimport { withRouter } from \"../utils\";\nimport Header from \"../Header\";\nconst axios = require(\"axios\");\n\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      username: '',\n      password: '',\n      isGoogleScriptLoaded: false,\n    };\n  }\n\n  componentDidMount() {\n    // Load the Google Identity Services library\n    this.loadGoogleScript();\n  }\n\n  loadGoogleScript = () => {\n    const script = document.createElement('script');\n    script.src = 'https://accounts.google.com/gsi/client';\n    script.async = true;\n    script.defer = true;\n    script.onload = this.onGoogleScriptLoad;\n    document.body.appendChild(script);\n  }\n\n  onGoogleScriptLoad = () => {\n    this.setState({ isGoogleScriptLoaded: true });\n    this.initializeGoogleSignIn();\n  }\n\n  initializeGoogleSignIn = () => {\n    if (window.google) {\n      window.google.accounts.id.initialize({\n        client_id: '480201724067-6k5cjhkqeg9gpk3aeomrq5vborb8kjqv.apps.googleusercontent.com',\n        callback: this.handleCredentialResponse,\n      });\n      window.google.accounts.id.renderButton(\n        document.getElementById(\"google-signin-button\"),\n        { theme: \"outline\", size: \"large\" } // Customization attributes\n      );\n    }\n  }\n\n  handleCredentialResponse = (response) => {\n    axios.post('http://localhost:2000/google-login', {\n      id_token: response.credential\n    }).then(res => {\n      // Handle successful login\n      localStorage.setItem('token', res.data.token);\n      localStorage.setItem('user_id', res.data.id);\n      localStorage.setItem('loggedIn', 'true'); // Set flag indicating user is logged in\n      this.props.navigate(\"/HomeDashboard\");\n    }).catch(err => {\n      console.error('Google Sign-In failed:', err);\n      swal({\n        text: 'Google Sign-In failed. Please try again.',\n        icon: \"error\",\n      });\n    });\n  }\n\n  onChange = (e) => this.setState({ [e.target.name]: e.target.value });\n\n  login = () => {\n    const { username, password } = this.state;\n  \n    axios.post('http://localhost:2000/login', {\n      username: username,\n      password: password,\n    }).then((res) => {\n      localStorage.setItem('token', res.data.token);\n      localStorage.setItem('user_id', res.data.id);\n      localStorage.setItem('loggedIn', 'true');\n      this.props.navigate(\"/HomeDashboard\");\n    }).catch((err) => {\n      if (err.response && err.response.data && err.response.data.errorMessage) {\n        swal({\n          text: err.response.data.errorMessage,\n          icon: \"error\",\n        });\n      }\n    });\n  }\n\n  render() {\n    const backgroundStyle = {\n      backgroundImage: 'url(\"https://i.postimg.cc/KYXFX1pB/Pngtree-background-biru-keren-dan-kosong-1738466.png\")',\n      backgroundSize: 'cover',\n      backgroundPosition: 'center',\n      backgroundRepeat: 'no-repeat',\n      height: '100vh',\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'center',\n    };\n\n    const formStyle = {\n      background: 'rgba(255, 255, 255, 0.8)',\n      padding: '20px',\n      borderRadius: '10px',\n      boxShadow: '0px 4px 10px rgba(0, 0, 0, 0.1)',\n      width: '100%',\n      maxWidth: '400px',\n      textAlign: 'center',\n    };\n\n    return (\n      <div style={backgroundStyle}>\n        <div style={formStyle}>\n          <h2>Login</h2>\n          <TextField\n            id=\"standard-basic\"\n            type=\"text\"\n            autoComplete=\"off\"\n            name=\"username\"\n            value={this.state.username}\n            onChange={this.onChange}\n            placeholder=\"User Name\"\n            required\n            fullWidth\n          />\n          <TextField\n            id=\"standard-basic\"\n            type=\"password\"\n            autoComplete=\"off\"\n            name=\"password\"\n            value={this.state.password}\n            onChange={this.onChange}\n            placeholder=\"Password\"\n            required\n            fullWidth\n          />\n          <Button\n            className=\"button-style\"\n            variant=\"contained\"\n            color=\"primary\"\n            size=\"large\"\n            disabled={this.state.username === '' || this.state.password === ''}\n            onClick={this.login}\n            fullWidth\n            style={{ marginTop: '20px' }}\n          >\n            Login\n          </Button>\n          <div className=\"google-signin\" style={{ margin: '20px 0' }}>\n            <div id=\"google-signin-button\"></div>\n          </div>\n          <Link\n            className=\"register-link\"\n            component=\"button\"\n            onClick={() => {\n              this.props.navigate(\"/register\");\n            }}\n            style={{ marginTop: '10px', color: '#3f51b5', fontWeight: 'bold' }}\n          >\n            Register\n          </Link>\n        </div>\n        <Header />\n      </div>\n    );\n  }\n}\n\nexport default withRouter(Login);\n"]},"metadata":{},"sourceType":"module"}